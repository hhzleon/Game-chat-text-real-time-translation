<!DOCTYPE html>
<html>
<head>
  <title>守望先锋翻译器 alt+/ 显示与隐藏</title>
  <script src="./vue.min.js"></script>
  <style>
        *{
          margin: 0;
          padding: 0;
        }
        textarea{
            border: 0;
            width: 100%;
            color: #fff;
            background-color: rgba(109, 46, 46, 0.515);
            font-size: 16px;
            height: 200px;
            resize: none;
        }
        input {
            width: 270px;
            height: 30px;
        }
        button{
          height: 30px;
          width: 100px;
          border: 0px;
          
          
        }
        button:hover{
          border-bottom-width: 5px;
          border-bottom-style: solid;
          border-bottom-color: orange;
        }
        #app{
          background-color: pink;
          background-image: url(./img/1451f5cce51511698881f8609ad27a401a58b539.png);
          background-repeat: no-repeat;
          background-size: cover;
        }
  </style>
</head>
<body>
  <div id="app">
    <textarea class="pywebview-drag-region" v-model="text" disabled rows="5" cols="30"></textarea>
    <br>
    <input v-model="inputText" type="text" placeholder="输入文本">
    <button @click="tranAndCopy">翻译</button>
    <button @click="submit">翻译列表</button>
    <br>
    <p>翻译: {{ tranText }}--alt+/显示-隐藏</p>
  </div>

  <script>
    document.addEventListener('contextmenu', function(e) {
      e.preventDefault();
    });




    new Vue({
      el: '#app',
      data: {
        text: '',
        inputText: '',
        tranText: ""
      },
      mounted() {
        window.submit = this.submit;  //绑定作用域
      }
      ,
      methods: {
        submit: function() {
        //   this.inputText = this.text;
            var that = this
            this.text = ""
            pywebview.api.tranPlayers_message().then(function(result){
                result.forEach(element => {
                    that.text = that.text+element+"\n";
                    console.log(that.text)
                });
            });
        },
        tranAndCopy: function(){
          // 将用户输入的中文翻译并copy到粘贴板
          var that = this
          pywebview.api.tranMessage(that.inputText).then((result)=>{
            that.tranText = result
          })
        }


      }
    });
  </script>
</body>
</html>
